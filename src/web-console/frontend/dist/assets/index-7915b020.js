import{d as k,u as A,a as U,b as B,r as E,o as T,l as w,w as P,c as g,e as f,f as u,g as c,h as a,i as V,E as y,j as i,k as x,m as $,n as q,M,p as I,q as N,_ as O,s as b,t as v,v as S,x as C,y as D,z as L}from"./index-3b510d65.js";const Y="/image/logo.png",j={class:"login"},z={class:"remember-account"},F=k({__name:"login",props:{username:{}},setup(r){const m=r,p=A(),e=U(),d=B(),o=E({username:"",password:"",loading:!1,rememberAccount:!0});function t(){o.loading=!0,d.USER_LOGIN(o.username,o.password).then(()=>{var s;o.rememberAccount?w.set({username:o.username,rememberAccount:o.rememberAccount}):w.remove(),o.loading=!1,e.push({path:((s=p.query)==null?void 0:s.redirect)||"/system/home"})}).catch(s=>{y({title:"提示信息",message:s.message,type:"warning",duration:2500}),o.loading=!1})}return T(()=>{const s=w.get();o.username=s==null?void 0:s.username,o.rememberAccount=s==null?void 0:s.rememberAccount}),P(()=>m.username,s=>{o.username=s},{immediate:!0}),(s,l)=>{const n=g("el-input"),h=g("el-checkbox"),K=g("el-button");return i(),f("div",j,[u(n,{modelValue:o.username,"onUpdate:modelValue":l[0]||(l[0]=_=>o.username=_),modelModifiers:{number:!0},placeholder:"用户名",maxlength:"13",clearable:"",onKeyup:c(t,["enter"])},null,8,["modelValue","onKeyup"]),u(n,{modelValue:o.password,"onUpdate:modelValue":l[1]||(l[1]=_=>o.password=_),modelModifiers:{trim:!0},placeholder:"密码",maxlength:"20",clearable:"","show-password":"",onKeyup:c(t,["enter"])},null,8,["modelValue","onKeyup"]),a("p",z,[u(h,{modelValue:o.rememberAccount,"onUpdate:modelValue":l[2]||(l[2]=_=>o.rememberAccount=_)},{default:V(()=>[x("记住账号")]),_:1},8,["modelValue"])]),u(K,{type:"primary",loading:o.loading,onClick:t,round:""},{default:V(()=>[x("账号登入 ")]),_:1},8,["loading"])])}}}),G=r=>(I("data-v-e1b67c1a"),r=r(),N(),r),H={class:"register"},J=G(()=>a("p",{class:"desc"},"*ps: 查看 data/registration_key.txt 文件内容",-1)),Q=k({__name:"register",emits:["completed"],setup(r,{emit:m}){A(),U();const p=$();B();const e=E({username:"",password:"",confirmPassword:"",secret:"",loading:!1});function d(){if(e.loading=!0,!e.username||!e.password||!e.secret){y({title:"提示信息",message:"还有东西没填写呢",type:"warning",duration:2500}),e.loading=!1;return}if(e.password!==e.confirmPassword){y({title:"提示信息",message:"两次密码输入不同",type:"warning",duration:2500}),e.loading=!1;return}q.ROOT_CREATE.post({username:e.username,password:M.init(e.password),secret:M.init(e.secret)}).then(()=>{e.loading=!1,p.hasRoot=!0,m("completed",e.username),y({title:"成功",message:"创建账号成功",type:"success",duration:2500})}).catch(()=>{e.loading=!1})}return(o,t)=>{const s=g("el-input"),l=g("el-button");return i(),f("div",H,[u(s,{modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=n=>e.username=n),modelModifiers:{number:!0},placeholder:"用户名",maxlength:"13",clearable:"",onKeyup:c(d,["enter"])},null,8,["modelValue","onKeyup"]),u(s,{modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=n=>e.password=n),modelModifiers:{trim:!0},placeholder:"密码",maxlength:"20",clearable:"","show-password":"",onKeyup:c(d,["enter"])},null,8,["modelValue","onKeyup"]),u(s,{modelValue:e.confirmPassword,"onUpdate:modelValue":t[2]||(t[2]=n=>e.confirmPassword=n),modelModifiers:{trim:!0},placeholder:"确认密码",maxlength:"20",clearable:"","show-password":"",onKeyup:c(d,["enter"])},null,8,["modelValue","onKeyup"]),u(s,{modelValue:e.secret,"onUpdate:modelValue":t[3]||(t[3]=n=>e.secret=n),modelModifiers:{trim:!0},style:{"margin-bottom":"0"},placeholder:"密钥",maxlength:"20",clearable:"","show-password":"",onKeyup:c(d,["enter"])},null,8,["modelValue","onKeyup"]),J,u(l,{type:"primary",loading:e.loading,onClick:d,round:""},{default:V(()=>[x("创建账号")]),_:1},8,["loading"])])}}});const W=O(Q,[["__scopeId","data-v-e1b67c1a"]]),R=r=>(I("data-v-75bd6e01"),r=r(),N(),r),X={class:"login-base"},Z=R(()=>a("header",{class:"login-header"},[a("h3",null,"Adachi-Admin")],-1)),ee={class:"login-main"},oe={class:"login-main-content"},se={class:"login-main-title"},te=R(()=>a("a",{href:"https://www.pixiv.net/artworks/85520334",target:"_blank",draggable:"false"},[a("img",{class:"login-logo",src:Y,alt:"ERROR",draggable:"false"})],-1)),ae={class:"login-title"},ne=R(()=>a("span",null,"BOT 网页控制台",-1)),re={key:0,class:"desc"},le={class:"login-main-form"},de={class:"login-footer"},ue={key:0},ie=k({__name:"index",setup(r){const m=new Date().getFullYear(),p=$(),e=b(()=>p.device==="mobile"),d=A(),o=v(!1),t=b(()=>!o.value&&d.query.createRoot==="true");b(()=>t.value?"创建 root 账号":"BOT 网页控制台");const s=v(""),l=v(null);function n(h){o.value=!0,s.value=h}return(h,K)=>(i(),f("div",X,[Z,a("main",ee,[a("div",oe,[a("div",se,[te,a("h2",ae,[ne,t.value?(i(),f("span",re,"（初次进入，请先创建 root 账号）")):S("",!0)])]),a("div",le,[t.value?(i(),C(W,{key:0,onCompleted:n})):(i(),C(F,{key:1,username:s.value,ref_key:"loginRef",ref:l},null,8,["username"]))])])]),a("footer",de,[e.value?S("",!0):(i(),f("span",ue,"MIT Licensed | ")),a("span",null,"Adachi管理面板 ©"+D(L(m))+" SilveryStar",1)])]))}});const me=O(ie,[["__scopeId","data-v-75bd6e01"]]);export{me as default};
