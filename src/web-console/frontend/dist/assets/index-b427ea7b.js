import{d as k,u as R,a as S,b as B,r as E,o as T,l as y,w as P,c as g,e as h,f as u,g as c,h as a,i as V,E as w,j as d,k as x,m as $,n as q,M,p as I,q as N,_ as O,s as b,t as v,v as C,x as U,y as D,z as L}from"./index-689ac86d.js";const Y="/image/logo.png",j={class:"login"},z={class:"remember-account"},F=k({__name:"login",props:{username:{}},setup(r){const m=r,p=R(),e=S(),i=B(),o=E({username:"",password:"",loading:!1,rememberAccount:!0});function t(){o.loading=!0,i.USER_LOGIN(o.username,o.password).then(()=>{var s;o.rememberAccount?y.set({username:o.username,rememberAccount:o.rememberAccount}):y.remove(),o.loading=!1,e.push({path:((s=p.query)==null?void 0:s.redirect)||"/system/home"})}).catch(s=>{w({title:"提示信息",message:s.message,type:"warning",duration:2500}),o.loading=!1})}return T(()=>{const s=y.get();o.username=s==null?void 0:s.username,o.rememberAccount=s==null?void 0:s.rememberAccount}),P(()=>m.username,s=>{o.username=s},{immediate:!0}),(s,l)=>{const n=g("el-input"),f=g("el-checkbox"),A=g("el-button");return d(),h("div",j,[u(n,{modelValue:o.username,"onUpdate:modelValue":l[0]||(l[0]=_=>o.username=_),modelModifiers:{number:!0},placeholder:"用户名",maxlength:"13",clearable:"",onKeyup:c(t,["enter"])},null,8,["modelValue","onKeyup"]),u(n,{modelValue:o.password,"onUpdate:modelValue":l[1]||(l[1]=_=>o.password=_),modelModifiers:{trim:!0},placeholder:"密码",maxlength:"20",clearable:"","show-password":"",onKeyup:c(t,["enter"])},null,8,["modelValue","onKeyup"]),a("p",z,[u(f,{modelValue:o.rememberAccount,"onUpdate:modelValue":l[2]||(l[2]=_=>o.rememberAccount=_)},{default:V(()=>[x("记住账号")]),_:1},8,["modelValue"])]),u(A,{type:"primary",loading:o.loading,onClick:t,round:""},{default:V(()=>[x("账号登入 ")]),_:1},8,["loading"])])}}}),G=r=>(I("data-v-e1b67c1a"),r=r(),N(),r),H={class:"register"},J=G(()=>a("p",{class:"desc"},"*ps: 查看 data/registration_key.txt 文件内容",-1)),Q=k({__name:"register",emits:["completed"],setup(r,{emit:m}){R(),S();const p=$();B();const e=E({username:"",password:"",confirmPassword:"",secret:"",loading:!1});function i(){if(e.loading=!0,!e.username||!e.password||!e.secret){w({title:"提示信息",message:"还有东西没填写呢",type:"warning",duration:2500}),e.loading=!1;return}if(e.password!==e.confirmPassword){w({title:"提示信息",message:"两次密码输入不同",type:"warning",duration:2500}),e.loading=!1;return}q.ROOT_CREATE.post({username:e.username,password:M.init(e.password),secret:M.init(e.secret)}).then(()=>{e.loading=!1,p.hasRoot=!0,m("completed",e.username),w({title:"成功",message:"创建账号成功",type:"success",duration:2500})}).catch(()=>{e.loading=!1})}return(o,t)=>{const s=g("el-input"),l=g("el-button");return d(),h("div",H,[u(s,{modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=n=>e.username=n),modelModifiers:{number:!0},placeholder:"用户名",maxlength:"13",clearable:"",onKeyup:c(i,["enter"])},null,8,["modelValue","onKeyup"]),u(s,{modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=n=>e.password=n),modelModifiers:{trim:!0},placeholder:"密码",maxlength:"20",clearable:"","show-password":"",onKeyup:c(i,["enter"])},null,8,["modelValue","onKeyup"]),u(s,{modelValue:e.confirmPassword,"onUpdate:modelValue":t[2]||(t[2]=n=>e.confirmPassword=n),modelModifiers:{trim:!0},placeholder:"确认密码",maxlength:"20",clearable:"","show-password":"",onKeyup:c(i,["enter"])},null,8,["modelValue","onKeyup"]),u(s,{modelValue:e.secret,"onUpdate:modelValue":t[3]||(t[3]=n=>e.secret=n),modelModifiers:{trim:!0},style:{"margin-bottom":"0"},placeholder:"密钥",maxlength:"20",clearable:"","show-password":"",onKeyup:c(i,["enter"])},null,8,["modelValue","onKeyup"]),J,u(l,{type:"primary",loading:e.loading,onClick:i,round:""},{default:V(()=>[x("创建账号")]),_:1},8,["loading"])])}}});const W=O(Q,[["__scopeId","data-v-e1b67c1a"]]),K=r=>(I("data-v-6b399d26"),r=r(),N(),r),X={class:"login-base"},Z=K(()=>a("header",{class:"login-header"},[a("h3",null,"chaichai-Admin")],-1)),ee={class:"login-main"},oe={class:"login-main-content"},se={class:"login-main-title"},te=K(()=>a("a",{href:"https://www.pixiv.net/artworks/85520334",target:"_blank",draggable:"false"},[a("img",{class:"login-logo",src:Y,alt:"ERROR",draggable:"false"})],-1)),ae={class:"login-title"},ne=K(()=>a("span",null,"BOT 网页控制台",-1)),re={key:0,class:"desc"},le={class:"login-main-form"},ie={class:"login-footer"},ue={key:0},de=k({__name:"index",setup(r){const m=new Date().getFullYear(),p=$(),e=b(()=>p.device==="mobile"),i=R(),o=v(!1),t=b(()=>!o.value&&i.query.createRoot==="true");b(()=>t.value?"创建 root 账号":"BOT 网页控制台");const s=v(""),l=v(null);function n(f){o.value=!0,s.value=f}return(f,A)=>(d(),h("div",X,[Z,a("main",ee,[a("div",oe,[a("div",se,[te,a("h2",ae,[ne,t.value?(d(),h("span",re,"（初次进入，请先创建 root 账号）")):C("",!0)])]),a("div",le,[t.value?(d(),U(W,{key:0,onCompleted:n})):(d(),U(F,{key:1,username:s.value,ref_key:"loginRef",ref:l},null,8,["username"]))])])]),a("footer",ie,[e.value?C("",!0):(d(),h("span",ue,"MIT Licensed | ")),a("span",null,"chaichai管理面板 ©"+D(L(m))+" chaichai",1)])]))}});const me=O(de,[["__scopeId","data-v-6b399d26"]]);export{me as default};
