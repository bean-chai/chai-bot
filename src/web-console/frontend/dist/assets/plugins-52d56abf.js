import{d as b,t as c,o as F,c as p,e as l,f as d,i as I,I as O,n as g,j as t,F as v,D as _,x as k,E as x,J as V}from"./index-3b510d65.js";import{S as B,a as E}from"./index-12e51a6e.js";const J={class:"table-container config"},T=b({__name:"plugins",setup(G){const n=c([]),a=c(!1),S=async()=>{a.value=!0;try{const e=await g.CONFIG_PLUGINS.get();n.value=e.data}catch{}a.value=!1};async function C(e,o){a.value=!0;try{await g.CONFIG_SET.post({fileName:o,data:JSON.parse(e),force:!0}),x({title:"成功",message:"更新成功。",type:"success",duration:1e3})}catch{}a.value=!1}const f=c(null);function h(e){f.value=e}function y(e){return V(e)}return F(()=>{S()}),(e,o)=>{const w=p("el-alert"),N=p("el-form");return t(),l("div",J,[d(w,{title:"该页内容修改完毕后续重启BOT或刷新配置才能生效",type:"warning","show-icon":""}),d(N,{class:"config-form",onSubmit:o[0]||(o[0]=O(()=>{},["prevent"]))},{default:I(()=>[(t(!0),l(v,null,_(n.value,(s,i)=>(t(),l("div",{key:i,class:"config-section"},[d(B,{title:s.name},null,8,["title"]),(t(!0),l(v,null,_(s.configs,(r,u)=>(t(),k(E,{key:s.name+u,"active-spread":f.value,modelValue:n.value[i].configs[u].data,"onUpdate:modelValue":m=>n.value[i].configs[u].data=m,type:"textarea",disabled:a.value,label:r.name,placeholder:"请输入配置项内容",rows:8,verifyReg:y,verifyMsg:"请检查输入内容是否符合 JSON 格式规范",onChange:m=>C(r.data,`${s.plugin}/${r.name}`),onOpen:h,hideContent:""},null,8,["active-spread","modelValue","onUpdate:modelValue","disabled","label","onChange"]))),128))]))),128))]),_:1})])}}});export{T as default};
